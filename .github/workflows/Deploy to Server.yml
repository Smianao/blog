name: Deploy to Server

on:
  push:
    branches: [master]
  workflow_dispatch:

jobs:
  docs:
    runs-on: ubuntu-latest

    steps:
      # æ­¥éª¤1ï¼šè·å–ä»£ç ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # æ­¥éª¤2ï¼šä¿®æ”¹ç‚¹ï¼ˆå…³é”®é”™è¯¯ä¿®æ­£ï¼‰ ğŸ”¥
      - name: è®¾ç½® Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 22
          cache: npm
        working-directory: ./src  # [!code --] âŒ é”™è¯¯ä½ç½®
        # æ­£ç¡®ä½ç½®åº”åœ¨å¤–å±‚ç¼©è¿›å±‚çº§ -->  [!code ++]

      # æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–ï¼ˆä¿æŒæ­£ç¡®ï¼‰
      - name: å®‰è£…ä¾èµ–
        run: npm ci
        working-directory: ./src

      # æ­¥éª¤4ï¼šæ„å»ºé¡¹ç›®ï¼ˆä¿æŒæ­£ç¡®ï¼‰
      - name: æ„å»º VuePress ç«™ç‚¹
        run: npm run docs:build
        working-directory: ./src

      # æ­¥éª¤5ï¼šä¸Šä¼ äº§ç‰©ï¼ˆå·²ä¿®å¤ï¼‰
      - name: Upload artifact
        uses: actions/upload-artifact@v3
        with:
          name: dist
          path: src/.vuepress/dist

